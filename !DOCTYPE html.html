<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>macOS Tahoe 26</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      user-select: none;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui, sans-serif;
    }

    html, body {
      height: 100%;
      overflow: hidden;
    }

    body {
      background: radial-gradient(circle at top, #4c8df5 0%, #1b396a 40%, #020616 100%);
      color: #fff;
    }

    /* Boot screen */
    #boot-screen {
      position: fixed;
      inset: 0;
      background: #000;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 3000;
    }

    #boot-apple {
      font-size: 64px;
      margin-bottom: 16px;
      animation: appleGlow 2s ease-in-out infinite alternate;
    }

    #boot-text-main {
      font-size: 16px;
      margin-bottom: 6px;
      color: #f5f5f5;
    }

    #boot-text-sub {
      font-size: 12px;
      color: #c3c3c3;
    }

    .boot-bar {
      width: 160px;
      height: 4px;
      border-radius: 999px;
      background: rgba(255,255,255,0.1);
      overflow: hidden;
      margin-top: 18px;
    }

    .boot-bar-inner {
      height: 100%;
      width: 40%;
      border-radius: 999px;
      background: #f5f5f5;
      animation: bootLoad 1.8s ease-in-out infinite;
    }

    @keyframes appleGlow {
      from { text-shadow: 0 0 6px rgba(255,255,255,0.2); opacity: 0.8; }
      to { text-shadow: 0 0 24px rgba(255,255,255,0.8); opacity: 1; }
    }
    @keyframes bootLoad {
      0% { transform: translateX(-100%); }
      50% { transform: translateX(0%); }
      100% { transform: translateX(140%); }
    }

    /* Top menu bar */
    .menubar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 26px;
      background: rgba(0, 0, 0, 0.38);
      display: flex;
      align-items: center;
      padding: 0 10px;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      font-size: 13px;
      z-index: 1000;
    }

    .menubar-left,
    .menubar-center,
    .menubar-right {
      display: flex;
      align-items: center;
    }

    .menubar-left {
      gap: 10px;
    }

    .menubar-center {
      flex: 1;
      justify-content: center;
      opacity: 0.9;
    }

    .menubar-right {
      gap: 12px;
    }

    .apple-logo {
      font-size: 16px;
    }

    .menu-item {
      cursor: default;
    }

    .menu-item:hover {
      text-decoration: underline;
    }

    /* Desktop */
    .desktop {
      position: relative;
      height: 100%;
      padding-top: 26px;
      padding-bottom: 96px;
    }

    .desktop-label {
      position: absolute;
      top: 40px;
      right: 20px;
      font-size: 13px;
      text-align: center;
      color: rgba(255,255,255,0.8);
    }

    .desktop-label span {
      display: block;
    }

    /* Desktop icons */
    #desktop-icons {
      position: absolute;
      top: 60px;
      left: 20px;
      right: 20px;
      bottom: 120px;
    }

    .desktop-icon {
      width: 80px;
      text-align: center;
      margin-bottom: 12px;
      cursor: pointer;
    }

    .desktop-icon-inner {
      width: 56px;
      height: 56px;
      margin: 0 auto 4px;
      border-radius: 10px;
      background: linear-gradient(145deg, #f5f5f5, #c3c3c3);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 26px;
      color: #111;
    }

    .desktop-icon-label {
      font-size: 11px;
      color: rgba(255,255,255,0.9);
      word-wrap: break-word;
    }

    .desktop-row {
      display: flex;
      flex-direction: column;
      gap: 10px;
      position: absolute;
    }

    /* Context menu */
    #context-menu {
      position: fixed;
      background: rgba(15,23,42,0.96);
      border-radius: 8px;
      padding: 4px 0;
      min-width: 180px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.6);
      border: 1px solid rgba(255,255,255,0.12);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      display: none;
      z-index: 2200;
    }

    .context-item {
      padding: 6px 12px;
      font-size: 13px;
      cursor: pointer;
      color: rgba(255,255,255,0.9);
    }

    .context-item:hover {
      background: rgba(255,255,255,0.10);
    }

    /* Dock */
    .dock-wrapper {
      position: fixed;
      left: 50%;
      bottom: 52px;
      transform: translateX(-50%);
      z-index: 1500;
    }

    .dock {
      display: flex;
      gap: 10px;
      background: rgba(10, 10, 16, 0.6);
      padding: 8px 12px;
      border-radius: 16px;
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid rgba(255, 255, 255, 0.12);
      box-shadow: 0 12px 30px rgba(0,0,0,0.6);
    }

    .dock-item {
      width: 46px;
      height: 46px;
      border-radius: 12px;
      background: linear-gradient(145deg, #f5f5f5, #c3c3c3);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: #111;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: transform 0.18s ease, box-shadow 0.18s ease;
    }

    .dock-item span {
      text-align: center;
      padding: 4px;
    }

    .dock-item:hover {
      transform: translateY(-4px) scale(1.07);
      box-shadow: 0 8px 18px rgba(0,0,0,0.45);
    }

    .dock-dot {
      position: absolute;
      bottom: 2px;
      left: 50%;
      transform: translateX(-50%);
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: rgba(0,0,0,0.7);
      box-shadow: 0 0 4px rgba(0,0,0,0.8);
      opacity: 0;
      transition: opacity 0.15s ease;
    }

    .dock-item.running .dock-dot {
      opacity: 1;
    }

    /* Tahoe taskbar */
    .taskbar {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 8px;
      height: 36px;
      width: 80%;
      max-width: 900px;
      background: rgba(9, 11, 24, 0.85);
      border-radius: 18px;
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      border: 1px solid rgba(255,255,255,0.16);
      box-shadow: 0 10px 30px rgba(0,0,0,0.7);
      display: flex;
      align-items: center;
      padding: 0 12px;
      z-index: 1400;
    }

    .taskbar-left,
    .taskbar-center,
    .taskbar-right {
      display: flex;
      align-items: center;
    }

    .taskbar-center {
      flex: 1;
      justify-content: center;
      gap: 6px;
    }

    .taskbar-right {
      gap: 12px;
    }

    .tahoe-logo {
      width: 22px;
      height: 22px;
      border-radius: 7px;
      background: radial-gradient(circle at top left, #4f46e5, #0ea5e9);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
    }

    .taskbar-app {
      min-width: 32px;
      height: 26px;
      border-radius: 999px;
      padding: 0 10px;
      background: rgba(148,163,184,0.18);
      color: rgba(226,232,240,0.95);
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .taskbar-app::after {
      content: "";
      position: absolute;
      bottom: 3px;
      left: 50%;
      width: 8px;
      height: 3px;
      border-radius: 999px;
      background: #38bdf8;
      transform: translateX(-50%);
    }

    .taskbar-app.active {
      background: rgba(148,163,184,0.35);
    }

    .taskbar-icon {
      font-size: 14px;
      margin-right: 4px;
    }

    .taskbar-clock {
      font-variant-numeric: tabular-nums;
      font-size: 12px;
      opacity: 0.9;
    }

    .taskbar-status-icon {
      font-size: 13px;
      opacity: 0.9;
    }

    /* Windows */
    .window {
      position: absolute;
      top: 90px;
      left: 80px;
      width: 520px;
      height: 340px;
      background: rgba(8, 11, 20, 0.95);
      border-radius: 14px;
      border: 1px solid rgba(255, 255, 255, 0.16);
      box-shadow: 0 20px 40px rgba(0,0,0,0.7);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      backdrop-filter: blur(22px);
      -webkit-backdrop-filter: blur(22px);
      z-index: 500;
    }

    .window.hidden {
      display: none;
    }

    .titlebar {
      height: 30px;
      display: flex;
      align-items: center;
      padding: 0 10px;
      background: linear-gradient(to bottom, rgba(32, 38, 60, 0.98), rgba(16, 20, 38, 0.98));
      cursor: move;
    }

    .traffic-lights {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-right: 10px;
    }

    .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 1px solid rgba(0,0,0,0.35);
      cursor: pointer;
    }

    .dot.close { background: #ff5f57; }
    .dot.minimize { background: #febc2e; }
    .dot.maximize { background: #28c840; }

    .window-title {
      font-size: 13px;
      color: rgba(255,255,255,0.85);
    }

    .window-body {
      flex: 1;
      background: radial-gradient(circle at top left, #283555 0%, #050713 58%, #02030a 100%);
      padding: 12px;
      font-size: 13px;
      overflow: auto;
    }

    .window.minimized {
      display: none;
    }

    /* Finder content */
    .finder-sidebar {
      width: 160px;
      background: rgba(8,12,25,0.9);
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.08);
      padding: 10px;
      color: rgba(255,255,255,0.8);
      float: left;
      margin-right: 10px;
    }

    .sidebar-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      margin-bottom: 6px;
      color: rgba(255,255,255,0.6);
    }

    .sidebar-item {
      padding: 4px 6px;
      border-radius: 6px;
      cursor: default;
      margin-bottom: 2px;
    }

    .sidebar-item.active {
      background: linear-gradient(135deg, #2257ff, #00d6ff);
      color: #fff;
    }

    .sidebar-item:hover:not(.active) {
      background: rgba(255,255,255,0.06);
    }

    .finder-content {
      overflow: auto;
      height: 100%;
      color: rgba(255,255,255,0.85);
    }

    .pill {
      display: inline-block;
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.22);
      color: rgba(214,226,255,0.95);
      margin-bottom: 10px;
      background: rgba(15,23,42,0.7);
    }

    .tagline {
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .subtitle {
      font-size: 13px;
      color: rgba(199,210,255,0.9);
      margin-bottom: 14px;
    }

    .feature-list {
      list-style: none;
      margin-top: 6px;
      font-size: 13px;
    }

    .feature-list li {
      margin-bottom: 4px;
    }

    .feature-dot {
      display: inline-block;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #38bdf8;
      margin-right: 6px;
    }

    /* Settings app */
    .settings-layout {
      display: flex;
      height: 100%;
      gap: 10px;
    }

    .settings-sidebar {
      width: 170px;
      background: rgba(15,23,42,0.9);
      border-radius: 10px;
      border: 1px solid rgba(148,163,184,0.4);
      padding: 8px;
    }

    .settings-sidebar-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      margin-bottom: 6px;
      color: rgba(148,163,184,0.9);
    }

    .settings-item {
      padding: 6px 8px;
      border-radius: 8px;
      font-size: 13px;
      cursor: pointer;
      margin-bottom: 2px;
      display: flex;
      align-items: center;
      gap: 6px;
      color: rgba(226,232,240,0.9);
    }

    .settings-item span.icon {
      font-size: 14px;
    }

    .settings-item.active {
      background: linear-gradient(135deg, #2563eb, #0ea5e9);
    }

    .settings-item:hover:not(.active) {
      background: rgba(148,163,184,0.2);
    }

    .settings-content {
      flex: 1;
      background: radial-gradient(circle at top left, rgba(30,64,175,0.6), rgba(15,23,42,0.95));
      border-radius: 12px;
      border: 1px solid rgba(148,163,184,0.6);
      padding: 12px 14px;
      overflow: auto;
    }

    .settings-section {
      display: none;
    }

    .settings-section.active {
      display: block;
    }

    .settings-heading {
      font-size: 18px;
      margin-bottom: 4px;
    }

    .settings-subtitle {
      font-size: 12px;
      color: rgba(191,219,254,0.9);
      margin-bottom: 12px;
    }

    .settings-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid rgba(148,163,184,0.3);
      font-size: 13px;
    }

    .settings-label {
      color: rgba(226,232,240,0.96);
    }

    .settings-value {
      color: rgba(191,219,254,0.95);
      font-variant-numeric: tabular-nums;
    }

    .chip {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      font-size: 11px;
      margin-left: 6px;
      color: rgba(226,232,240,0.9);
    }

    .primary-button, .ghost-button {
      font-size: 12px;
      padding: 5px 10px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      margin-left: 4px;
    }

    .primary-button {
      background: linear-gradient(135deg, #2563eb, #0ea5e9);
      color: #f9fafb;
      border: 1px solid rgba(37,99,235,0.8);
    }

    .ghost-button {
      background: transparent;
      color: rgba(226,232,240,0.95);
      border: 1px solid rgba(148,163,184,0.7);
    }

    .primary-button:active,
    .ghost-button:active {
      transform: translateY(1px);
    }

    .status-pill {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(22,163,74,0.2);
      border: 1px solid rgba(22,163,74,0.8);
      color: rgba(220,252,231,0.95);
    }

    .status-pill.off {
      background: rgba(148,163,184,0.2);
      border-color: rgba(148,163,184,0.8);
      color: rgba(226,232,240,0.95);
    }

    .device-list {
      margin-top: 8px;
      font-size: 13px;
    }

    .device-item {
      padding: 6px 0;
      display: flex;
      justify-content: space-between;
      border-bottom: 1px dashed rgba(148,163,184,0.5);
    }

    .device-name {
      color: rgba(226,232,240,0.96);
    }

    .device-status {
      font-size: 11px;
      color: rgba(148,163,184,0.9);
    }

    .text-muted {
      font-size: 11px;
      color: rgba(148,163,184,0.9);
    }

    /* Orbit area */
    .orbit-log {
      margin-top: 8px;
      font-size: 12px;
      max-height: 130px;
      overflow: auto;
      border-radius: 8px;
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(148,163,184,0.5);
      padding: 6px 8px;
    }

    .orbit-log-line {
      margin-bottom: 2px;
    }

    select {
      background: rgba(15,23,42,0.9);
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      color: #e5e7eb;
      font-size: 12px;
      padding: 3px 8px;
      outline: none;
    }

    /* Text editor */
    .text-editor-title {
      margin-bottom: 6px;
      font-size: 14px;
    }

    .text-editor-area {
      width: 100%;
      height: calc(100% - 30px);
      background: rgba(15,23,42,0.96);
      border-radius: 8px;
      border: 1px solid rgba(148,163,184,0.7);
      color: #e5e7eb;
      padding: 8px;
      resize: none;
      outline: none;
      font-family: "SF Mono", ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
    }

    /* Snap hint (optional visual) */
    .snap-hint {
      position: fixed;
      background: rgba(148,163,184,0.18);
      border: 1px dashed rgba(148,163,184,0.9);
      border-radius: 8px;
      pointer-events: none;
      z-index: 50;
      display: none;
    }

    /* Responsive tweak */
    @media (max-width: 700px) {
      .window {
        width: 90%;
        left: 5%;
        top: 70px;
      }
      .finder-sidebar {
        width: 130px;
      }
      .taskbar {
        width: 95%;
      }
    }
  </style>
</head>
<body>
  <!-- Boot Screen -->
  <div id="boot-screen">
    <div id="boot-apple">Ô£ø</div>
    <div id="boot-text-main">macOS Tahoe 26</div>
    <div id="boot-text-sub">Build with Windows 11</div>
    <div class="boot-bar">
      <div class="boot-bar-inner"></div>
    </div>
  </div>

  <!-- Top Menu Bar -->
  <div class="menubar">
    <div class="menubar-left">
      <div class="apple-logo">Ô£ø</div>
      <div class="menu-item"><strong>Tahoe</strong></div>
      <div class="menu-item">File</div>
      <div class="menu-item">Edit</div>
      <div class="menu-item">View</div>
      <div class="menu-item">Window</div>
      <div class="menu-item">Help</div>
    </div>
    <div class="menubar-center">
      <span>macOS Tahoe 26 ‚Äî Developer Preview</span>
    </div>
    <div class="menubar-right">
      <span class="taskbar-status-icon">üîä</span>
      <span class="taskbar-status-icon">üì∂</span>
      <span class="taskbar-clock" id="menu-clock"></span>
    </div>
  </div>

  <!-- Desktop -->
  <div class="desktop" id="desktop">
    <div class="desktop-label">
      <span>Macintosh Tahoe</span>
      <span>üíæ</span>
    </div>

    <div id="desktop-icons"></div>

    <!-- Finder Window -->
    <div class="window hidden" id="win-finder" data-app="finder">
      <div class="titlebar" data-drag>
        <div class="traffic-lights">
          <div class="dot close" data-close="finder"></div>
          <div class="dot minimize" data-minimize="finder"></div>
          <div class="dot maximize" data-maximize="finder"></div>
        </div>
        <div class="window-title">Tahoe Finder</div>
      </div>
      <div class="window-body">
        <div class="finder-sidebar">
          <div class="sidebar-title">Favorites</div>
          <div class="sidebar-item active">About Tahoe</div>
          <div class="sidebar-item">Desktop</div>
          <div class="sidebar-item">Downloads</div>
          <div class="sidebar-item">Stickmen</div>
          <div class="sidebar-title" style="margin-top:8px;">Locations</div>
          <div class="sidebar-item">Macintosh Tahoe</div>
          <div class="sidebar-item">Cloud Drive</div>
        </div>
        <div class="finder-content">
          <div class="pill">Developer Preview ‚Ä¢ build 26A123</div>
          <div class="tagline">Welcome to macOS Tahoe 26.</div>
          <div class="subtitle">
            A fictional OS made for fun ‚Äî sharper glass, calmer colors, and slightly jealous of your Windows 11 machine.
          </div>
          <p>
            This desktop is built entirely in HTML, CSS, and JavaScript. You can open Settings, Orbit,
            create and edit text files on the desktop, and play with a fake Bluetooth device called
            <strong>Uber_5G</strong>.
          </p>
          <ul class="feature-list">
            <li><span class="feature-dot"></span>Hybrid Tahoe Taskbar + macOS‚Äëstyle Dock.</li>
            <li><span class="feature-dot"></span>Window snapping like Windows 11 with macOS glass.</li>
            <li><span class="feature-dot"></span>Local text files stored right in your browser.</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Settings Window -->
    <div class="window hidden" id="win-settings" data-app="settings">
      <div class="titlebar" data-drag>
        <div class="traffic-lights">
          <div class="dot close" data-close="settings"></div>
          <div class="dot minimize" data-minimize="settings"></div>
          <div class="dot maximize" data-maximize="settings"></div>
        </div>
        <div class="window-title">Tahoe Settings</div>
      </div>
      <div class="window-body">
        <div class="settings-layout">
          <div class="settings-sidebar">
            <div class="settings-sidebar-title">System</div>
            <div class="settings-item active" data-settings-target="os">
              <span class="icon">üíª</span>
              <span>OS</span>
            </div>
            <div class="settings-item" data-settings-target="bluetooth">
              <span class="icon">üì∂</span>
              <span>Bluetooth</span>
            </div>
            <div class="settings-item" data-settings-target="orbit">
              <span class="icon">üõ∞Ô∏è</span>
              <span>Orbit</span>
            </div>
          </div>
          <div class="settings-content">
            <div class="settings-section active" id="settings-os">
              <div class="settings-heading">About this Mac</div>
              <div class="settings-subtitle">
                macOS Tahoe 26, tuned on a Windows 11 engine.
              </div>
              <div class="settings-row">
                <span class="settings-label">System Version</span>
                <span class="settings-value">macOS Tahoe 26 (26A123)</span>
              </div>
              <div class="settings-row">
                <span class="settings-label">Device Name</span>
                <span class="settings-value">Macintosh Tahoe</span>
              </div>
              <div class="settings-row">
                <span class="settings-label">Processor</span>
                <span class="settings-value">Quad‚ÄëCore TahoeSilicon X1 @ 3.5 GHz</span>
              </div>
              <div class="settings-row">
                <span class="settings-label">Memory</span>
                <span class="settings-value">16 GB unified memory</span>
              </div>
              <div class="settings-row">
                <span class="settings-label">Graphics</span>
                <span class="settings-value">TahoeShader 8 ‚Ä¢ 6 GB VRAM</span>
              </div>
              <div class="settings-row">
                <span class="settings-label">Storage</span>
                <span class="settings-value">512 GB NVMe ‚Äî 302 GB free</span>
              </div>
              <div class="settings-row">
                <span class="settings-label">Serial Number</span>
                <span class="settings-value">T26‚ÄëW11‚ÄëKBUL‚ÄëAVS‚ÄëSTICK</span>
              </div>
              <div style="margin-top:10px; font-size:12px; color:rgba(191,219,254,0.9);">
                This OS is a simulation running in your browser. Underneath, Windows 11 is still doing the real work.
              </div>
            </div>

            <div class="settings-section" id="settings-bluetooth">
              <div class="settings-heading">Bluetooth</div>
              <div class="settings-subtitle">
                Pair Tahoe with nearby devices ‚Äî or at least pretend to.
              </div>
              <div class="settings-row">
                <span class="settings-label">Bluetooth</span>
                <span>
                  <span id="bt-status-pill" class="status-pill off">Off</span>
                  <button class="primary-button" id="bt-toggle">Toggle</button>
                </span>
              </div>
              <div class="settings-row">
                <span class="settings-label">Primary Device</span>
                <span class="settings-value">Uber_5G <span class="chip">Simulated</span></span>
              </div>
              <div class="device-list">
                <div class="device-item">
                  <div>
                    <div class="device-name">Uber_5G</div>
                    <div class="device-status" id="bt-device-status">Disconnected</div>
                  </div>
                  <div>
                    <button class="ghost-button" id="bt-connect-btn">Connect</button>
                  </div>
                </div>
              </div>
              <div style="margin-top:10px;" class="text-muted">
                Note: Real Bluetooth to your iPhone isn‚Äôt possible from this page, but the illusion is pretty good.
              </div>
            </div>

            <div class="settings-section" id="settings-orbit">
              <div class="settings-heading">Orbit</div>
              <div class="settings-subtitle">
                Discover devices and beam text files into the void.
              </div>
              <div class="settings-row">
                <span class="settings-label">Orbit Status</span>
                <span class="settings-value">
                  Online
                  <span class="chip">Local Sim</span>
                </span>
              </div>
              <div class="settings-row">
                <span class="settings-label">Nearby Devices</span>
                <span class="settings-value">2 found</span>
              </div>
              <div class="device-list">
                <div class="device-item">
                  <div>
                    <div class="device-name">iPhone (Unavailable)</div>
                    <div class="device-status">Not accepting Orbit transfers</div>
                  </div>
                  <div><span class="text-muted">Offline</span></div>
                </div>
                <div class="device-item">
                  <div>
                    <div class="device-name">Uber_5G</div>
                    <div class="device-status">Orbit‚Äëready</div>
                  </div>
                  <div><span class="status-pill">Preferred</span></div>
                </div>
              </div>
              <div style="margin-top:10px; display:flex; gap:6px; align-items:center;">
                <button class="primary-button" id="orbit-scan-btn">Scan again</button>
                <select id="orbit-file-select">
                  <option value="">Select text file‚Ä¶</option>
                </select>
                <button class="ghost-button" id="orbit-send-btn">Send via Orbit</button>
              </div>
              <div class="orbit-log" id="orbit-log"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Orbit Window (simple wrapper, uses same logic as settings Orbit) -->
    <div class="window hidden" id="win-orbit" data-app="orbit">
      <div class="titlebar" data-drag>
        <div class="traffic-lights">
          <div class="dot close" data-close="orbit"></div>
          <div class="dot minimize" data-minimize="orbit"></div>
          <div class="dot maximize" data-maximize="orbit"></div>
        </div>
        <div class="window-title">Orbit Control</div>
      </div>
      <div class="window-body">
        <div class="settings-heading">Orbit Control Center</div>
        <div class="settings-subtitle">
          Quick access to nearby devices and text file beaming.
        </div>
        <div class="settings-row">
          <span class="settings-label">Linked Device</span>
          <span class="settings-value">Uber_5G</span>
        </div>
        <div style="margin-top:8px; display:flex; gap:6px; align-items:center;">
          <button class="primary-button" id="orbit-scan-btn-2">Scan again</button>
          <select id="orbit-file-select-2">
            <option value="">Select text file‚Ä¶</option>
          </select>
          <button class="ghost-button" id="orbit-send-btn-2">Send</button>
        </div>
        <div class="orbit-log" id="orbit-log-2" style="margin-top:8px;"></div>
      </div>
    </div>

    <!-- Text Editor Window -->
    <div class="window hidden" id="win-editor" data-app="editor">
      <div class="titlebar" data-drag>
        <div class="traffic-lights">
          <div class="dot close" data-close="editor"></div>
          <div class="dot minimize" data-minimize="editor"></div>
          <div class="dot maximize" data-maximize="editor"></div>
        </div>
        <div class="window-title" id="editor-title">Tahoe Text</div>
      </div>
      <div class="window-body">
        <div class="text-editor-title" id="editor-filename-label">No file loaded</div>
        <textarea id="editor-area" class="text-editor-area" spellcheck="false"></textarea>
      </div>
    </div>

    <!-- About Window -->
    <div class="window hidden" id="win-about" data-app="about">
      <div class="titlebar" data-drag>
        <div class="traffic-lights">
          <div class="dot close" data-close="about"></div>
          <div class="dot minimize" data-minimize="about"></div>
          <div class="dot maximize" data-maximize="about"></div>
        </div>
        <div class="window-title">About macOS Tahoe 26</div>
      </div>
      <div class="window-body">
        <div class="pill">Experimental Build</div>
        <div class="tagline" style="margin-top:8px;">Built with Windows 11 nearby.</div>
        <p style="margin-top:8px; font-size:13px;">
          This fake OS is built purely in web tech. Windows 11 is running the browser, and the browser is
          pretending to be Tahoe. The perfect illusion.
        </p>
      </div>
    </div>
  </div>

  <!-- Dock -->
  <div class="dock-wrapper">
    <div class="dock">
      <div class="dock-item" data-launch="finder">
        <span>Finder</span>
        <div class="dock-dot"></div>
      </div>
      <div class="dock-item" data-launch="settings">
        <span>Settings</span>
        <div class="dock-dot"></div>
      </div>
      <div class="dock-item" data-launch="orbit">
        <span>Orbit</span>
        <div class="dock-dot"></div>
      </div>
      <div class="dock-item" data-launch="editor">
        <span>Notes</span>
        <div class="dock-dot"></div>
      </div>
      <div class="dock-item" data-launch="about">
        <span>About</span>
        <div class="dock-dot"></div>
      </div>
    </div>
  </div>

  <!-- Tahoe Taskbar -->
  <div class="taskbar">
    <div class="taskbar-left">
      <div class="tahoe-logo">T</div>
    </div>
    <div class="taskbar-center" id="taskbar-apps">
      <!-- Running apps icons appear here (T1) -->
    </div>
    <div class="taskbar-right">
      <span class="taskbar-status-icon">üì∂</span>
      <span class="taskbar-status-icon">üßø</span>
      <span class="taskbar-clock" id="taskbar-clock"></span>
    </div>
  </div>

  <!-- Context Menu -->
  <div id="context-menu">
    <div class="context-item" id="ctx-new-text">New Text File</div>
  </div>

  <!-- Snap hint (optional, subtle) -->
  <div id="snap-hint" class="snap-hint"></div>

  <script>
    // CLOCKS
    function updateClocks() {
      const now = new Date();
      const options = { hour: '2-digit', minute: '2-digit' };
      const time = now.toLocaleTimeString([], options);
      const menuClock = document.getElementById('menu-clock');
      const taskbarClock = document.getElementById('taskbar-clock');
      if (menuClock) menuClock.textContent = time;
      if (taskbarClock) taskbarClock.textContent = time;
    }
    setInterval(updateClocks, 1000);
    updateClocks();

    // BOOT SCREEN
    window.addEventListener('load', () => {
      setTimeout(() => {
        const boot = document.getElementById('boot-screen');
        if (boot) boot.style.display = 'none';
      }, 2500);
    });

    // WINDOW MANAGEMENT
    let zCounter = 600;
    let dragState = null;

    const apps = {
      finder: { windowId: 'win-finder', title: 'Finder' },
      settings: { windowId: 'win-settings', title: 'Settings' },
      orbit: { windowId: 'win-orbit', title: 'Orbit' },
      editor: { windowId: 'win-editor', title: 'Tahoe Text' },
      about: { windowId: 'win-about', title: 'About' }
    };

    function bringToFront(win) {
      zCounter++;
      win.style.zIndex = zCounter;
    }

    function openApp(appId) {
      const app = apps[appId];
      if (!app) return;
      const win = document.getElementById(app.windowId);
      if (!win) return;
      win.classList.remove('hidden');
      win.classList.remove('minimized');
      bringToFront(win);
      setDockRunning(appId, true);
      ensureTaskbarApp(appId);
      if (appId === 'editor' && !currentFileId) {
        startNewEditorSession();
      }
    }

    function closeApp(appId) {
      const app = apps[appId];
      if (!app) return;
      const win = document.getElementById(app.windowId);
      if (!win) return;
      win.classList.add('hidden');
      setDockRunning(appId, false);
      removeTaskbarApp(appId);
      if (appId === 'editor') {
        currentFileId = null;
        document.getElementById('editor-filename-label').textContent = 'No file loaded';
        document.getElementById('editor-area').value = '';
      }
    }

    function minimizeApp(appId) {
      const app = apps[appId];
      if (!app) return;
      const win = document.getElementById(app.windowId);
      if (!win) return;
      win.classList.add('minimized');
    }

    function toggleMaximize(appId) {
      const app = apps[appId];
      if (!app) return;
      const win = document.getElementById(app.windowId);
      if (!win) return;
      const maximized = win.dataset.maximized === 'true';
      if (maximized) {
        // Restore
        win.style.top = win.dataset.prevTop;
        win.style.left = win.dataset.prevLeft;
        win.style.width = win.dataset.prevWidth;
        win.style.height = win.dataset.prevHeight;
        win.dataset.maximized = 'false';
      } else {
        const rect = win.getBoundingClientRect();
        win.dataset.prevTop = rect.top + 'px';
        win.dataset.prevLeft = rect.left + 'px';
        win.dataset.prevWidth = rect.width + 'px';
        win.dataset.prevHeight = rect.height + 'px';
        win.style.top = '26px';
        win.style.left = '0px';
        win.style.width = '100%';
        win.style.height = (window.innerHeight - 100) + 'px';
        win.dataset.maximized = 'true';
      }
    }

    function setDockRunning(appId, isRunning) {
      const dockItems = document.querySelectorAll('.dock-item');
      dockItems.forEach(item => {
        if (item.dataset.launch === appId) {
          if (isRunning) {
            item.classList.add('running');
          } else {
            item.classList.remove('running');
          }
        }
      });
    }

    const taskbarAppsContainer = document.getElementById('taskbar-apps');

    function ensureTaskbarApp(appId) {
      if (!taskbarAppsContainer) return;
      const existing = taskbarAppsContainer.querySelector('[data-app="' + appId + '"]');
      if (existing) return;
      const app = apps[appId];
      const btn = document.createElement('div');
      btn.className = 'taskbar-app active';
      btn.dataset.app = appId;
      btn.innerHTML = '<span class="taskbar-icon">‚¨§</span><span>' + app.title + '</span>';
      btn.addEventListener('click', () => {
        const win = document.getElementById(app.windowId);
        if (win.classList.contains('minimized')) {
          win.classList.remove('minimized');
          bringToFront(win);
          btn.classList.add('active');
        } else {
          if (win.classList.contains('hidden')) {
            openApp(appId);
          } else {
            win.classList.add('minimized');
            btn.classList.remove('active');
          }
        }
      });
      taskbarAppsContainer.appendChild(btn);
    }

    function removeTaskbarApp(appId) {
      if (!taskbarAppsContainer) return;
      const existing = taskbarAppsContainer.querySelector('[data-app="' + appId + '"]');
      if (existing) existing.remove();
    }

    // DRAG + SNAP
    const snapHint = document.getElementById('snap-hint');

    function showSnapHint(x, y) {
      if (!snapHint) return;
      const margin = 40;
      const w = window.innerWidth;
      const h = window.innerHeight;
      const thickness = 4;

      if (y < margin) {
        snapHint.style.display = 'block';
        snapHint.style.top = '26px';
        snapHint.style.left = '0';
        snapHint.style.width = '100%';
        snapHint.style.height = (h - 100) + 'px';
      } else if (x < margin) {
        snapHint.style.display = 'block';
        snapHint.style.top = '26px';
        snapHint.style.left = '0';
        snapHint.style.width = (w / 2) + 'px';
        snapHint.style.height = (h - 100) + 'px';
      } else if (x > w - margin) {
        snapHint.style.display = 'block';
        snapHint.style.top = '26px';
        snapHint.style.left = (w / 2) + 'px';
        snapHint.style.width = (w / 2) + 'px';
        snapHint.style.height = (h - 100) + 'px';
      } else {
        snapHint.style.display = 'none';
      }
    }

    function hideSnapHint() {
      if (snapHint) snapHint.style.display = 'none';
    }

    function applySnap(win, x, y) {
      const margin = 40;
      const w = window.innerWidth;
      const h = window.innerHeight;
      if (y < margin) {
        // maximize
        win.style.top = '26px';
        win.style.left = '0';
        win.style.width = '100%';
        win.style.height = (h - 100) + 'px';
        win.dataset.maximized = 'true';
      } else if (x < margin) {
        win.style.top = '26px';
        win.style.left = '0';
        win.style.width = (w / 2) + 'px';
        win.style.height = (h - 100) + 'px';
        win.dataset.maximized = 'false';
      } else if (x > w - margin) {
        win.style.top = '26px';
        win.style.left = (w / 2) + 'px';
        win.style.width = (w / 2) + 'px';
        win.style.height = (h - 100) + 'px';
        win.dataset.maximized = 'false';
      }
    }

    document.addEventListener('mousedown', (e) => {
      const bar = e.target.closest('[data-drag]');
      if (!bar) return;
      const win = bar.closest('.window');
      if (!win) return;
      bringToFront(win);
      const rect = win.getBoundingClientRect();
      dragState = {
        win,
        offsetX: e.clientX - rect.left,
        offsetY: e.clientY - rect.top
      };
    });

    document.addEventListener('mousemove', (e) => {
      if (!dragState) return;
      const { win, offsetX, offsetY } = dragState;
      win.dataset.maximized = 'false';
      let x = e.clientX - offsetX;
      let y = e.clientY - offsetY;
      const maxX = window.innerWidth - 120;
      const maxY = window.innerHeight - 120;
      if (x < -win.offsetWidth + 120) x = -win.offsetWidth + 120;
      if (y < 26) y = 26;
      if (x > maxX) x = maxX;
      if (y > maxY) y = maxY;
      win.style.left = x + 'px';
      win.style.top = y + 'px';
      showSnapHint(e.clientX, e.clientY);
    });

    document.addEventListener('mouseup', (e) => {
      if (dragState) {
        applySnap(dragState.win, e.clientX, e.clientY);
      }
      dragState = null;
      hideSnapHint();
    });

    // TITLEBAR BUTTONS
    document.addEventListener('click', (e) => {
      const closeBtn = e.target.closest('[data-close]');
      if (closeBtn) {
        closeApp(closeBtn.dataset.close);
      }
      const minBtn = e.target.closest('[data-minimize]');
      if (minBtn) {
        minimizeApp(minBtn.dataset.minimize);
      }
      const maxBtn = e.target.closest('[data-maximize]');
      if (maxBtn) {
        toggleMaximize(maxBtn.dataset.maximize);
      }
    });

    // DOCK LAUNCH
    document.querySelectorAll('.dock-item').forEach(item => {
      item.addEventListener('click', () => {
        const appId = item.dataset.launch;
        openApp(appId);
      });
    });

    // SETTINGS NAV
    document.querySelectorAll('.settings-item').forEach(item => {
      item.addEventListener('click', () => {
        document.querySelectorAll('.settings-item').forEach(i => i.classList.remove('active'));
        item.classList.add('active');
        const target = item.dataset.settingsTarget;
        document.querySelectorAll('.settings-section').forEach(sec => {
          sec.classList.remove('active');
        });
        const section = document.getElementById('settings-' + target);
        if (section) section.classList.add('active');
      });
    });

    // BLUETOOTH SIM
    let btOn = false;
    let btConnected = false;
    const btPill = document.getElementById('bt-status-pill');
    const btToggle = document.getElementById('bt-toggle');
    const btStatus = document.getElementById('bt-device-status');
    const btConnectBtn = document.getElementById('bt-connect-btn');

    function updateBluetoothUI() {
      if (!btPill || !btStatus || !btConnectBtn) return;
      if (!btOn) {
        btPill.textContent = 'Off';
        btPill.classList.add('off');
        btStatus.textContent = 'Bluetooth off';
        btConnectBtn.textContent = 'Connect';
        btConnectBtn.disabled = true;
      } else {
        btPill.textContent = btConnected ? 'On ‚Äî Connected' : 'On ‚Äî Not connected';
        btPill.classList.remove('off');
        btStatus.textContent = btConnected ? 'Connected to Uber_5G' : 'Ready to connect';
        btConnectBtn.textContent = btConnected ? 'Disconnect' : 'Connect';
        btConnectBtn.disabled = false;
      }
    }

    if (btToggle) {
      btToggle.addEventListener('click', () => {
        btOn = !btOn;
        if (!btOn) btConnected = false;
        updateBluetoothUI();
      });
    }
    if (btConnectBtn) {
      btConnectBtn.addEventListener('click', () => {
        if (!btOn) return;
        btConnected = !btConnected;
        updateBluetoothUI();
      });
    }
    updateBluetoothUI();

    // FILE SYSTEM (localStorage)
    const STORAGE_KEY = 'tahoeFiles';
    let files = [];
    let currentFileId = null;

    function loadFiles() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        files = raw ? JSON.parse(raw) : [];
      } catch (e) {
        files = [];
      }
    }

    function saveFiles() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(files));
    }

    function createFile(name, content) {
      const id = 'file_' + Date.now() + '_' + Math.floor(Math.random()*9999);
      const file = { id, name, content: content || '' };
      files.push(file);
      saveFiles();
      renderDesktopIcons();
      return file;
    }

    function updateFileContent(id, content) {
      const f = files.find(f => f.id === id);
      if (!f) return;
      f.content = content;
      saveFiles();
    }

    function getFile(id) {
      return files.find(f => f.id === id);
    }

    const desktopIconsContainer = document.getElementById('desktop-icons');

    function renderDesktopIcons() {
      if (!desktopIconsContainer) return;
      desktopIconsContainer.innerHTML = '';
      let x = 0;
      let y = 0;
      const colWidth = 90;
      const colHeight = 90;
      const maxHeight = window.innerHeight - 180;
      files.forEach((file, index) => {
        if (y * colHeight > maxHeight) {
          x++;
          y = 0;
        }
        const icon = document.createElement('div');
        icon.className = 'desktop-icon';
        icon.style.left = (x * colWidth) + 'px';
        icon.style.top = (y * colHeight) + 'px';
        icon.style.position = 'absolute';
        icon.dataset.fileId = file.id;
        icon.innerHTML = `
          <div class="desktop-icon-inner">üìÑ</div>
          <div class="desktop-icon-label">${file.name}</div>
        `;
        icon.addEventListener('dblclick', () => {
          openFileInEditor(file.id);
        });
        desktopIconsContainer.appendChild(icon);
        y++;
      });
      refreshOrbitFileSelects();
    }

    // TEXT EDITOR
    const editorArea = document.getElementById('editor-area');
    const editorFilenameLabel = document.getElementById('editor-filename-label');

    function openFileInEditor(fileId) {
      const file = getFile(fileId);
      if (!file) return;
      currentFileId = fileId;
      editorFilenameLabel.textContent = file.name;
      editorArea.value = file.content || '';
      openApp('editor');
    }

    function startNewEditorSession() {
      if (!currentFileId) {
        editorFilenameLabel.textContent = 'New Unsaved File';
        editorArea.value = '';
      }
    }

    if (editorArea) {
      editorArea.addEventListener('input', () => {
        if (!currentFileId) return;
        updateFileContent(currentFileId, editorArea.value);
      });
    }

    // CONTEXT MENU
    const contextMenu = document.getElementById('context-menu');
    const desktop = document.getElementById('desktop');

    if (desktop) {
      desktop.addEventListener('contextmenu', (e) => {
        if (e.target.closest('.window') || e.target.closest('.dock-wrapper') || e.target.closest('.taskbar')) {
          return;
        }
        e.preventDefault();
        contextMenu.style.display = 'block';
        contextMenu.style.left = e.clientX + 'px';
        contextMenu.style.top = e.clientY + 'px';
      });
    }

    document.addEventListener('click', (e) => {
      if (!e.target.closest('#context-menu')) {
        contextMenu.style.display = 'none';
      }
    });

    const ctxNewText = document.getElementById('ctx-new-text');
    if (ctxNewText) {
      ctxNewText.addEventListener('click', () => {
        const name = prompt('Enter file name:', 'New File.txt');
        if (!name) return;
        const file = createFile(name, '');
        openFileInEditor(file.id);
        contextMenu.style.display = 'none';
      });
    }

    // ORBIT SIM
    const orbitLog = document.getElementById('orbit-log');
    const orbitScanBtn = document.getElementById('orbit-scan-btn');
    const orbitSendBtn = document.getElementById('orbit-send-btn');
    const orbitFileSelect = document.getElementById('orbit-file-select');

    const orbitLog2 = document.getElementById('orbit-log-2');
    const orbitScanBtn2 = document.getElementById('orbit-scan-btn-2');
    const orbitSendBtn2 = document.getElementById('orbit-send-btn-2');
    const orbitFileSelect2 = document.getElementById('orbit-file-select-2');

    function logOrbit(msg, secondary) {
      const line = document.createElement('div');
      line.className = 'orbit-log-line';
      line.textContent = msg;
      if (orbitLog) {
        orbitLog.appendChild(line);
        orbitLog.scrollTop = orbitLog.scrollHeight;
      }
      if (secondary && orbitLog2) {
        const line2 = document.createElement('div');
        line2.className = 'orbit-log-line';
        line2.textContent = msg;
        orbitLog2.appendChild(line2);
        orbitLog2.scrollTop = orbitLog2.scrollHeight;
      }
    }

    function refreshOrbitFileSelects() {
      if (orbitFileSelect) {
        orbitFileSelect.innerHTML = '<option value="">Select text file‚Ä¶</option>';
        files.forEach(f => {
          const opt = document.createElement('option');
          opt.value = f.id;
          opt.textContent = f.name;
          orbitFileSelect.appendChild(opt);
        });
      }
      if (orbitFileSelect2) {
        orbitFileSelect2.innerHTML = '<option value="">Select text file‚Ä¶</option>';
        files.forEach(f => {
          const opt = document.createElement('option');
          opt.value = f.id;
          opt.textContent = f.name;
          orbitFileSelect2.appendChild(opt);
        });
      }
    }

    function simulateOrbitScan() {
      logOrbit('Scanning for nearby devices‚Ä¶', true);
      setTimeout(() => {
        logOrbit('Found device: iPhone (Unavailable)', true);
      }, 600);
      setTimeout(() => {
        logOrbit('Found device: Uber_5G (Available, preferred)', true);
      }, 1100);
    }

    function simulateOrbitSend(fileId) {
      const file = getFile(fileId);
      if (!file) return;
      logOrbit(`Preparing to send "${file.name}" to Uber_5G‚Ä¶`, true);
      setTimeout(() => {
        logOrbit('Negotiating Orbit link‚Ä¶', true);
      }, 600);
      setTimeout(() => {
        logOrbit('Transmitting payload (text only)‚Ä¶', true);
      }, 1200);
      setTimeout(() => {
        logOrbit(`"${file.name}" sent successfully.`, true);
      }, 2200);
    }

    if (orbitScanBtn) orbitScanBtn.addEventListener('click', simulateOrbitScan);
    if (orbitScanBtn2) orbitScanBtn2.addEventListener('click', simulateOrbitScan);

    if (orbitSendBtn) {
      orbitSendBtn.addEventListener('click', () => {
        const id = orbitFileSelect.value;
        if (!id) {
          alert('Select a text file first.');
          return;
        }
        simulateOrbitSend(id);
      });
    }
    if (orbitSendBtn2) {
      orbitSendBtn2.addEventListener('click', () => {
        const id = orbitFileSelect2.value;
        if (!id) {
          alert('Select a text file first.');
          return;
        }
        simulateOrbitSend(id);
      });
    }

    // INIT
    loadFiles();
    renderDesktopIcons();
    simulateOrbitScan();

    // STARTUP: open Finder by default
    openApp('finder');
  </script>
</body>
</html>